function ajaxRequest(url,callback){let request=new XMLHttpRequest;request.open("GET",url,!0),request.onreadystatechange=function(){4===request.readyState&&200===request.status&&callback(request.responseText)},request.send()}let paymentId=document.getElementById("paymentId").value,paymentHash=document.getElementById("paymentHash").value,successUrl=document.getElementById("successUrl").value,qrHolder=document.querySelectorAll(".flip-box")[0],copyButton=document.getElementById("lnbitsCopyInvoiceButton"),invoice=document.getElementById("invoiceLink").getAttribute(["data-invoice"]);function sendRequest(){ajaxRequest("/lnbits-check-payment?id="+paymentId+"&hash="+paymentHash,(function(response){paid=JSON.parse(response),!0===paid.paid?(qrHolder.classList.add("paid"),window.setTimeout((function(){window.location.href=successUrl}),500)):window.setTimeout(sendRequest,400)}))}copyButton.addEventListener("click",(function(){navigator.clipboard.writeText(invoice)})),sendRequest();